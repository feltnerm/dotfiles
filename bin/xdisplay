#!/bin/bash
#
# This script toggles the extended monitor outputs if something is connected
#

# your notebook monitor
DEFAULT_OUTPUT='LVDS1'

# outputs to toggle if connected
OUTPUTS='VGA1 HDMI1'

# get info from xrandr
XRANDR=`xrandr`

EXECUTE=""

for CURRENT in $OUTPUTS
do
        if [[ $XRANDR == *$CURRENT\ connected*  ]] # is connected
        then
                if [[ $XRANDR == *$CURRENT\ connected\ \(* ]] # is disabled
                then
                    if [[ $CURRENT == "VGA1" ]]
                    then
                        EXECUTE+="--output $CURRENT --mode 1600x1200 -pos 1280x0"
                    else
                        EXECUTE+="--output $CURRENT --auto --above $DEFAULT_OUTPUT "
                    fi
                else
                        EXECUTE+="--output $CURRENT --off "
                fi
        else # make sure disconnected outputs are off 
                EXECUTE+="--output $CURRENT --off "
        fi
done

xrandr --output $DEFAULT_OUTPUT --mode 1280x800 -pos 0x400 --rotate normal $EXECUTE
nitrogen --restore
