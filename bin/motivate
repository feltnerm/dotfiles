#!/usr/bin/env python3

"""
Motivate3k

displays a quote or goal from a list of quotes or goals

"""
import os
import os.path
import sys
import random
import mmap


QUOTES_FILE = os.path.expandpath("~/doc/quotes")


def add(quote, author=None):

    with open(QUOTES_FILE, "w") as f:
        if author:
            f.write("%s &^& %s" % (quote, author))
        else
            f.write("%s" % quote)


def list():

    with open(QUOTES_FILE) as f:



def parse_args():

    argp = argparse.ArgumentParser()
    argp.add_argument("-a", "--add",
            help="Add a new quote to the database")
    argp.add_argument("-l", "--list", 
            help="List current quote database")

    args = argp.parse_args()
    return args


def main():

    options = parse_args()

    return 0


if __name__ == "__main__":
    status = main()
    sys.exit(status)

# get # lines in file
with open(QUOTES_DEST, "r+") as f:
    buf = mmap.mmap(f.fileno(), 0)
    lines = 0
    readline = buf.readline
    while readline():
        lines += 1

    ceiling = random.randint(0, lines-1)
    
    f.seek(0)

    quote, author = f.readlines()[ceiling].strip('\n').split('+')
if author:
    print(""""%s" - %s""" % (quote, author))
else:
    print(quote)
